# 528Camera
Проект системы распределённой потоковой обработки видеоданных, получаемых с камеры.

## Структура проекта
* Компонент CameraFramework осуществляет захват видео с камеры и постановку кадров в очередь обработки; 
* Компонент remote-image-worker осуществляет обработку кадров из очереди и постановку результатов в финальную очередь;
* Компонент remote-image-receiver осуществляет сбор результатов из финальной очереди и формирование видеопотока.

Каждый компонент можно развернуть на отдельной машине; все компоненты связаны через локальную сеть.

## Обмен данными
Данные сериализуются в бинарном формате [Google Protocol Buffers](https://developers.google.com/protocol-buffers). Формат сообщения определяется в **[frame_data.proto](https://github.com/528Camera/.github/blob/main/profile/frame_data.proto) ([генерация кода](https://github.com/528Camera/.github/wiki/Proto))** и содержит следующие поля:
* Номер версии системы (*int32 version*) - для обеспечения совместимости;
* Изображение в виде байтовой строки (*bytes image*), закодированное в формате JPG.
* Опционально: временная метка кадра (*google.protobuf.Timestamp time*);
* Порядковый номер кадра (*int32 frame_index*) - для упорядочивания финальной очереди;

Для обмена данными по сети используется библиотека [ZeroMQ](https://zeromq.org).

## Обработка изображений
Для обработки изображений используется библиотека [OpenCV](https://opencv.org) в следующих обёртках:
* [Emgu CV](https://www.emgu.com) - язык программирования C#;
* [opencv](https://crates.io/crates/opencv) crate - язык программирования Rust;
